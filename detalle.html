<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Detalle del caso - Observatorio Walmart M√©xico</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <header>
      <h1>Detalle del caso</h1>
      <nav>
        <a href="index.html">Inicio</a>
        <a href="denuncias.html">Casos publicados</a>
        <a href="formulario.html">Registrar denuncia</a>
      </nav>
    </header>

    <main>
      <article class="detalle-caso">
        <!-- Aqu√≠ se insertar√° din√°micamente la denuncia -->
      </article>
    </main>

    <footer>
      <p>&copy; 2026 Observatorio de Denuncias Walmart M√©xico</p>
    </footer>

    <!-- üëá Script al final del body -->
    <script>
      async function cargarDetalle() {
        // Obtener el par√°metro "id" de la URL
        const params = new URLSearchParams(window.location.search);
        const id = params.get("id");

        // Cargar denuncias desde el servidor
        const respuesta = await fetch("http://localhost:3000/denuncias");
        const denuncias = await respuesta.json();

        // Buscar la denuncia con ese id
        const denuncia = denuncias.find((d) => d.id === id);
        const contenedor = document.querySelector(".detalle-caso");

        if (denuncia) {
          contenedor.innerHTML = `
            <h2>${denuncia.titulo}</h2>
            <p><strong>Producto:</strong> ${denuncia.producto}</p>
            <h3>Descripci√≥n completa</h3>
            <p>${denuncia.descripcion}</p>
            <h3>Evidencias</h3>
            <ul>${denuncia.evidencias.map((e) => `<li>${e}</li>`).join("")}</ul>
            <h3>Clasificaci√≥n</h3>
            <p>${denuncia.clasificacion}</p>
            <h3>Estatus del caso</h3>
            <p>${denuncia.estatus}</p>
          `;
        } else {
          contenedor.innerHTML = "<p>Denuncia no encontrada.</p>";
        }
      }

      window.onload = cargarDetalle;
    </script>
  </body>
</html>

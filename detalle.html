<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Detalle de denuncia</title>
  </head>
  <body>
    <h1>Detalle de denuncia</h1>
    <div id="detalle"></div>

    <script>
      async function cargarDetalle() {
        // Tomar el parámetro "id" de la URL
        const params = new URLSearchParams(window.location.search);
        const id = params.get("id");

        if (!id) {
          document.getElementById("detalle").innerText =
            "No se especificó denuncia.";
          return;
        }

        // Obtener todas las denuncias del backend
        const res = await fetch("/denuncias");
        const denuncias = await res.json();

        // Buscar la denuncia con ese ID
        const denuncia = denuncias.find((d) => d.id === id);

        if (!denuncia) {
          document.getElementById("detalle").innerText =
            "Denuncia no encontrada.";
          return;
        }

        // Mostrar la información completa
        document.getElementById("detalle").innerHTML = `
        <p><strong>ID:</strong> ${denuncia.id}</p>
        <p><strong>Título:</strong> ${denuncia.titulo}</p>
        <p><strong>Producto:</strong> ${denuncia.producto}</p>
        <p><strong>Descripción:</strong> ${denuncia.descripcion}</p>
        <p><strong>Clasificación:</strong> ${denuncia.clasificacion}</p>
        <p><strong>Estatus:</strong> ${denuncia.estatus}</p>
      `;
      }

      cargarDetalle();
    </script>
  </body>
</html>

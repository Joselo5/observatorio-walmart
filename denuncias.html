<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Casos publicados - Observatorio Walmart M√©xico</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <header>
      <h1>Casos publicados</h1>
      <nav>
        <a href="index.html">Inicio</a>
        <a href="formulario.html">Registrar denuncia</a>
        <a href="recursos.html">Recursos</a>
      </nav>
    </header>

    <main>
      <section id="lista-denuncias">
        <h2>Denuncias aprobadas</h2>
        <!-- üëá Aqu√≠ se insertar√°n las denuncias din√°micamente -->
      </section>
    </main>

    <footer>
      <p>&copy; 2026 Observatorio de Denuncias Walmart M√©xico</p>
    </footer>

    <!-- üëá Script al final del body -->
    <script>
      async function cargarDenuncias() {
        const respuesta = await fetch("http://localhost:3000/denuncias");
        const denuncias = await respuesta.json();
        const contenedor = document.getElementById("lista-denuncias");

        denuncias.forEach((d) => {
          if (
            d.estatus.includes("Aprobada") ||
            d.estatus.includes("En revisi√≥n")
          ) {
            const card = document.createElement("div");
            card.className = "denuncia-card";
            card.innerHTML = `
              <h3>${d.titulo}</h3>
              <p><strong>Producto:</strong> ${d.producto}</p>
              <p><strong>Descripci√≥n breve:</strong> ${d.descripcion}</p>
              <p><strong>Evidencias:</strong> ${d.evidencias.join(", ")}</p>
              <p><strong>Clasificaci√≥n:</strong> ${d.clasificacion}</p>
              <p><strong>Estatus:</strong> ${d.estatus}</p>
              <a href="detalle.html?id=${d.id}" class="boton">Ver detalles completos</a>
            `;
            contenedor.appendChild(card);
          }
        });
      }

      window.onload = cargarDenuncias;
    </script>
  </body>
</html>
